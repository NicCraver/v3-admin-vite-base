"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formItemProps=exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils"),_vn=require("../../tools/vn"),_util=require("./util"),_render=require("./render");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,l=1,i=arguments.length;l<i;l++)for(var n in t=arguments[l])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},formItemProps={title:String,field:String,span:[String,Number],align:String,titleAlign:{type:String,default:null},titleWidth:{type:[String,Number],default:null},titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},showTitle:{type:Boolean,default:!0},className:[String,Function],contentClassName:[String,Function],contentStyle:[Object,Function],titleClassName:[String,Function],titleStyle:[Object,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visibleMethod:Function,visible:{type:Boolean,default:null},folding:Boolean,collapseNode:Boolean,itemRender:Object},_default=(exports.formItemProps=formItemProps,(0,_vue.defineComponent)({name:"VxeFormItem",props:formItemProps,setup:function(e,t){var t=t.slots,$=(0,_vue.ref)(),k=(0,_vue.inject)("$xeform",{}),l=(0,_vue.inject)("$xeformgather",null),D=(0,_vue.reactive)((0,_util.createItem)(k,e)),i={formItem:D},n={itemConfig:D};D.slots=t,(0,_vue.provide)("$xeformiteminfo",n),(0,_vue.provide)("$xeformitem",i),(0,_vue.provide)("$xeformgather",null),(0,_util.watchItem)(e,D),(0,_vue.onMounted)(function(){(0,_util.assemItem)(k,$.value,D,l)}),(0,_vue.onUnmounted)(function(){(0,_util.destroyItem)(k,D)});return{renderVN:function(){var t,e,l,i,n,o,s,P,r,R,u,V,a,f,B,d,c,m,_,v,p,x,g,h,N,y,F,C,U,b,S,O,q,I,T,j,w,A,M,E=k?k.props:null;return E&&E.customLayout?(E=D,b=(t=k).props,i=t.reactData,e=b.data,l=b.rules,S=b.titleAlign,O=b.titleWidth,q=b.titleColon,I=b.titleAsterisk,w=b.titleOverflow,i=i.collapseAll,n=t.getComputeMaps().computeValidOpts.value,C=E.slots,o=E.title,s=E.visible,P=E.folding,r=E.field,R=E.collapseNode,u=E.itemRender,V=E.showError,a=E.errRule,f=E.className,T=E.titleOverflow,B=E.showTitle,d=E.contentClassName,c=E.contentStyle,m=E.titleClassName,_=E.titleStyle,v=(0,_utils.isEnableConf)(u)?_vXETable.VXETable.renderer.get(u.name):null,p=v?v.itemClassName:"",x=v?v.itemStyle:null,g=v?v.itemContentClassName:"",h=v?v.itemContentStyle:null,N=v?v.itemTitleClassName:"",y=v?v.itemTitleStyle:null,F=C?C.default:null,C=C?C.title:null,U=E.span||b.span,b=E.align||b.align,S=_xeUtils.default.eqNull(E.titleAlign)?S:E.titleAlign,O=_xeUtils.default.eqNull(E.titleWidth)?O:E.titleWidth,q=_xeUtils.default.eqNull(E.titleColon)?q:E.titleColon,I=_xeUtils.default.eqNull(E.titleAsterisk)?I:E.titleAsterisk,j=!0===(w=_xeUtils.default.isUndefined(T)||_xeUtils.default.isNull(T)?w:T)||"tooltip"===w,w=(T="title"===w)||j||"ellipsis"===w,A={data:e,field:r,property:r,item:E,$form:t,$grid:t.xegrid},(M=!1)===s?(0,_vue.createCommentVNode)():(l&&(s=l[r])&&(M=s.some(function(e){return e.required})),l=[],F?l=t.callSlot(F,A):v&&v.renderItemContent?l=(0,_vn.getSlotVNs)(v.renderItemContent(u,A)):r&&(l=["".concat(_xeUtils.default.get(e,r))]),R&&l.push((0,_vue.h)("div",{class:"vxe-form--item-trigger-node",onClick:t.toggleCollapseEvent},[(0,_vue.h)("span",{class:"vxe-form--item-trigger-text"},i?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),(0,_vue.h)("i",{class:["vxe-form--item-trigger-icon",i?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})])),a&&n.showMessage&&l.push((0,_vue.h)("div",{class:"vxe-form--item-valid",style:a.maxWidth?{width:"".concat(a.maxWidth,"px")}:null},a.message)),s=j?{onMouseenter:function(e){t.triggerTitleTipEvent(e,A)},onMouseleave:t.handleTitleTipLeaveEvent}:{},(0,_vue.h)("div",{ref:$,class:["vxe-form--item",E.id,U?"vxe-col--".concat(U," is--span"):"",f?_xeUtils.default.isFunction(f)?f(A):f:"",p?_xeUtils.default.isFunction(p)?p(A):p:"",{"is--title":o,"is--colon":q,"is--asterisk":I,"is--required":M,"is--hidden":P&&i,"is--active":(0,_util.isActivetem)(t,E),"is--error":V}],style:_xeUtils.default.isFunction(x)?x(A):x},[(0,_vue.h)("div",{class:"vxe-form--item-inner"},[!1!==B&&(o||C)?(0,_vue.h)("div",__assign({class:["vxe-form--item-title",S?"align--".concat(S):"",w?"is--ellipsis":"",N?_xeUtils.default.isFunction(N)?N(A):N:"",m?_xeUtils.default.isFunction(m)?m(A):m:""],style:Object.assign({},_xeUtils.default.isFunction(y)?y(A):y,_xeUtils.default.isFunction(_)?_(A):_,O?{width:isNaN(O)?O:"".concat(O,"px")}:null),title:T?(0,_utils.getFuncText)(o):null},s),(0,_render.renderTitle)(t,E)):null,(0,_vue.h)("div",{class:["vxe-form--item-content",b?"align--".concat(b):"",g?_xeUtils.default.isFunction(g)?g(A):g:"",d?_xeUtils.default.isFunction(d)?d(A):d:""],style:Object.assign({},_xeUtils.default.isFunction(h)?h(A):h,_xeUtils.default.isFunction(c)?c(A):c)},l)])]))):(0,_vue.h)("div",{ref:$})}}},render:function(){return this.renderVN()}}));exports.default=_default;